<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANeKI Gastroturismo - Explora Sabores Únicos</title>
    <meta name="description" content="Descubre las mejores rutas de tapas, restaurantes auténticos y experiencias culinarias inolvidables con ANeKI Gastroturismo.">
    <?!= include('css'); ?>
</head>
<body>
    <?!= include('navbar'); ?> 
    <header id="hero-image-container" aria-labelledby="hero-title">
        <img src="https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&cs=tinysrgb&w=1200&h=800&dpr=1"
             onerror="this.onerror=null;this.src='https://placehold.co/1200x800/E0E0E0/777?text=Paisaje+Gastronomico';"
             alt="Delicias gastronómicas en un ambiente acogedor" class="hero-image-single">
        
        <div class="hero-overlay-content container">
            <h1 id="hero-title" class="hero-main-title">Descubre la Esencia del Sabor</h1>
            <p class="hero-subtitle">Tu aventura gastronómica comienza aquí. Explora, degusta, disfruta.</p>
            <a href="#autonomias" class="btn btn-lg hero-btn">Empezar a Explorar</a>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <section id="inicio" class="content-section text-center welcome-section" aria-labelledby="welcome-heading">
                <h2 id="welcome-heading" class="section-title">Bienvenido a la Aventura Gastronómica</h2>
                <p class="section-subtitle">En ANeKI Gastroturismo, te llevamos en un viaje culinario para descubrir los tesoros escondidos de la gastronomía. Explora rutas auténticas, encuentra restaurantes con encanto y vive experiencias que deleitarán tus sentidos.</p>
                <div class="button-group">
                    <a href="#autonomias" class="btn btn-primary">Ver Comunidades Autónomas</a>
                    <a href="#restaurantes" class="btn btn-secondary">Restaurantes Destacados</a>
                </div>
            </section>

            <section id="autonomias" class="content-section autonomias-section" aria-labelledby="autonomias-heading">
                <h2 id="autonomias-heading" class="section-title">Comunidades Autónomas</h2>
                <p class="section-intro text-center">Selecciona una comunidad autónoma y sumérgete en su cultura gastronómica única.</p>
                
                <div class="autonomia-buttons button-group">
                    <? 
                    // Se asume que 'Autonomia_Pais' es un array de objetos disponible desde el script de Google Apps.
                    // Cada objeto tiene al menos una propiedad 'Nombre' y 'Usar' (o similar).
                    // Ejemplo: Autonomia_Pais = [{Nombre: "Andalucía", Usar: 1}, {Nombre: "Aragón", Usar: 1}, ...]
                    var autonomiasDisponibles = typeof Autonomia_Pais !== "undefined" && Array.isArray(Autonomia_Pais) ? Autonomia_Pais : [];
                    var hayAutonomias = false;
                    if (autonomiasDisponibles.length > 0) {
                        for (var i = 0; i < autonomiasDisponibles.length; i++) {
                            if (autonomiasDisponibles[i] && autonomiasDisponibles[i].Nombre && autonomiasDisponibles[i].Usar == 1) {
                                hayAutonomias = true;
                                var nombreAutonomia = autonomiasDisponibles[i].Nombre;
                                // Construir la URL para la página de Sitios, pasando la autonomía como parámetro.
                                // Se asume que el script de Google Apps maneja la navegación con ?vista=NombreVista&param=valor
                                var urlDestino = ScriptApp.getService().getUrl() + "?vista=Sitios&autonomia=" + encodeURIComponent(nombreAutonomia);
                                ?>
                                <a href="<?= urlDestino ?>" class="btn btn-autonomia"><?= nombreAutonomia ?></a>
                            <?
                            }
                        }
                    }
                    
                    if (!hayAutonomias) { ?>
                        <p class="no-data">Actualmente no hay comunidades autónomas disponibles. Vuelve a intentarlo más tarde.</p>
                    <? } ?>
                </div>
            </section>

            <section id="restaurantes" class="content-section restaurantes-section" aria-labelledby="restaurantes-heading">
                <h2 id="restaurantes-heading" class="section-title">Joyas Culinarias</h2>
                <p class="section-subtitle">Restaurantes que merecen una visita.</p>
                <div class="grid-layout">
                    <article class="card restaurante-card">
                        <img src="https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg?auto=compress&cs=tinysrgb&w=400&h=250&dpr=1" 
                             onerror="this.onerror=null;this.src='https://placehold.co/400x250/E0E0E0/777?text=Restaurante';"
                             alt="Plato servido en el Café Bar Rúa 11" class="card-img-top">
                        <div class="card-body">
                            <h3 class="card-title">Café Bar Rúa 11</h3>
                            <p class="card-subtitle">Vermutería y Tapas de Autor</p>
                            <p class="card-rating"><strong>Valoración:</strong> <span class="stars">★★★★★</span></p>
                            <p class="card-text">Imprescindible vermutería con tapas de autor. Rubén y su equipo ofrecen una atención de 10. ¡Más de 50 marcas de vermuts!</p>
                            <div class="card-actions">
                                <a href="#" class="btn btn-sm btn-outline" title="Ver en Mapa">📍 Ubicación</a>
                                <a href="#" class="btn btn-sm btn-primary" title="Más Información">Leer Más</a>
                            </div>
                        </div>
                        <div class="card-footer social-icons">
                            <a href="#" title="Facebook" aria-label="Facebook del Café Bar Rúa 11"><i class="fab fa-facebook-f"></i> F</a> <a href="#" title="Instagram" aria-label="Instagram del Café Bar Rúa 11"><i class="fab fa-instagram"></i> I</a>
                            <a href="#" title="Sitio Web" aria-label="Sitio Web del Café Bar Rúa 11"><i class="fas fa-globe"></i> W</a>
                        </div>
                    </article>

                    <article class="card restaurante-card">
                        <img src="https://images.pexels.com/photos/1267320/pexels-photo-1267320.jpeg?auto=compress&cs=tinysrgb&w=400&h=250&dpr=1" 
                             onerror="this.onerror=null;this.src='https://placehold.co/400x250/E0E0E0/777?text=Restaurante';"
                             alt="Interior del Restaurante Valderas" class="card-img-top">
                        <div class="card-body">
                            <h3 class="card-title">Restaurante Valderas</h3>
                            <p class="card-subtitle">Cocina Tradicional Moderna</p>
                            <p class="card-rating"><strong>Valoración:</strong> <span class="stars">★★★★☆</span></p>
                            <p class="card-text">Cocina tradicional con un toque moderno. Ideal para una comida especial o una cena memorable. No te pierdas sus especialidades de temporada.</p>
                            <div class="card-actions">
                               <a href="#" class="btn btn-sm btn-outline" title="Ver en Mapa">📍 Ubicación</a>
                                <a href="#" class="btn btn-sm btn-primary" title="Más Información">Leer Más</a>
                            </div>
                        </div>
                         <div class="card-footer social-icons">
                            <a href="#" title="Facebook" aria-label="Facebook del Restaurante Valderas"><i class="fab fa-facebook-f"></i> F</a>
                            <a href="#" title="Sitio Web" aria-label="Sitio Web del Restaurante Valderas"><i class="fas fa-globe"></i> W</a>
                        </div>
                    </article>
                    </div>
            </section>

            <section id="extras" class="content-section extras-section" aria-labelledby="extras-heading">
                <h2 id="extras-heading" class="section-title">Más Allá de la Mesa</h2>
                <div class="grid-features">
                    <div class="feature-item">
                        <span class="feature-icon">🗺️</span>
                        <h3 class="feature-title">Mapas Interactivos</h3>
                        <p>Navega fácilmente a tus destinos gastronómicos con nuestros mapas integrados.</p>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">📸</span>
                        <h3 class="feature-title">Galería de Curiosidades</h3>
                        <p>Descubre fotos de carteles y señales curiosas encontradas en nuestras rutas.</p>
                         <a href="#contacto" class="btn btn-sm btn-link">Ver Galería (Próximamente)</a>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">⭐</span>
                        <h3 class="feature-title">Valoraciones Reales</h3>
                        <p>Opiniones y valoraciones de nuestra comunidad para ayudarte a elegir.</p>
                    </div>
                </div>
            </section>

            <section id="contacto" class="content-section contacto-section" aria-labelledby="contacto-heading">
                <h2 id="contacto-heading" class="section-title">¿Hablamos?</h2>
                <p class="section-subtitle">¿Tienes alguna sugerencia, pregunta o quieres compartir tu experiencia? ¡Nos encantaría escucharte!</p>
                <form id="contactForm" class="contact-form">
                    <div class="form-group">
                        <label for="name">Nombre:</label>
                        <input type="text" id="name" name="name" required placeholder="Tu nombre completo">
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" required placeholder="tu.correo@ejemplo.com">
                    </div>
                    <div class="form-group">
                        <label for="message">Mensaje:</label>
                        <textarea id="message" name="message" rows="5" required placeholder="Escribe tu mensaje aquí..."></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary btn-submit btn-lg">Enviar Mensaje</button>
                </form>
                <div id="form-status"></div>
            </section>
        </div>
    </main>

    <?!= include('footer'); ?> 
      <script>
        // Script para manejar el menú hamburguesa
        const burgerToggle = document.getElementById('burger-toggle');
        const navLinks = document.querySelector('.nav-links'); // Asegúrate que esta clase exista en tu navbar

        if (burgerToggle && navLinks) {
            // El comportamiento básico de abrir/cerrar se maneja con CSS (:checked)
            // Este JS es para cerrar el menú al hacer clic en un enlace (mejora UX en móviles)
            navLinks.addEventListener('click', (event) => {
                if (event.target.tagName === 'A') {
                    // Solo cierra si el menú está visible (controlado por el checkbox)
                    if (burgerToggle.checked) {
                        burgerToggle.checked = false; 
                    }
                }
            });
        }
        
        // Script para el formulario de contacto
        const contactForm = document.getElementById('contactForm');
        const formStatus = document.getElementById('form-status');
        if (contactForm && formStatus) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                // Simulación de envío. Reemplazar con google.script.run si es necesario.
                formStatus.innerHTML = '<p class="success">¡Gracias por tu mensaje! Nos pondremos en contacto pronto.</p>';
                contactForm.reset();
                setTimeout(() => { formStatus.innerHTML = ''; }, 5000); // Limpiar mensaje después de 5s
            });
        }

        // Smooth scroll para anclas (opcional, si no se usa CSS scroll-behavior)
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const hrefAttribute = this.getAttribute('href');
                if (hrefAttribute && hrefAttribute.length > 1) { // Asegurarse que no es solo "#"
                    const targetElement = document.querySelector(hrefAttribute);
                    if (targetElement) {
                        e.preventDefault();
                        // Considerar la altura de la navbar fija al hacer scroll
                        const navbarHeight = document.querySelector('.navbar') ? document.querySelector('.navbar').offsetHeight : 0;
                        const elementPosition = targetElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - navbarHeight;
                        
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                    }
                }
            });
        });

    </script>
    </body>
</html>
